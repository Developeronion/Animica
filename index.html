<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Animica Hindi</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fff;
      color: #333;
    }
    header {
      background-color: #f36f21;
      padding: 15px 30px;
      color: white;
      font-weight: bold;
      font-size: 24px;
      letter-spacing: 1px;
    }
    main {
      display: flex;
      min-height: calc(100vh - 100px); /* Adjusted for header and footer */
    }
    nav {
      width: 250px;
      background-color: #fff3e6;
      border-right: 1px solid #f36f21;
      overflow-y: auto;
    }
    nav h2 {
      margin: 20px;
      color: #f36f21;
    }
    nav ul {
      list-style: none;
      padding-left: 0;
    }
    nav li {
      padding: 12px 20px;
      cursor: pointer;
      border-bottom: 1px solid #f36f21;
      transition: background-color 0.3s;
    }
    nav li:hover, nav li.active {
      background-color: #f36f21;
      color: white;
    }
    section#episodes {
      flex-grow: 1;
      padding: 20px 30px;
      overflow-y: auto;
      background-size: contain; /* Or cover, depending on preference */
      background-position: center top;
      background-repeat: no-repeat; /* Changed to no-repeat, adjust if needed */
      background-color: #000;
      color: white;
      text-shadow: 1px 1px 3px #000;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    section#episodes h2 {
      color: #fff;
      margin-bottom: 10px;
      background: rgba(0, 0, 0, 0.6);
      padding: 8px 16px;
      border-radius: 8px;
      text-align: center;
    }
    .episode-list {
      margin-top: 10px;
      background: rgba(0, 0, 0, 0.7); /* Slightly more opaque for readability */
      padding: 15px;
      border-radius: 12px;
      width: 100%;
      max-width: 600px;
    }
    .episode {
      margin-bottom: 12px;
    }
    .episode a {
      color: #ffcc99;
      text-decoration: none;
      font-weight: 600;
    }
    .episode a:hover {
      text-decoration: underline;
    }
    .genres-display {
        font-size: 0.9em;
        color: #ddd;
        margin-bottom: 15px;
        background: rgba(0,0,0,0.5);
        padding: 5px 10px;
        border-radius: 5px;
    }
    footer {
      text-align: center;
      padding: 10px;
      background: #f36f21;
      color: white;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <header>Animica Hindi</header>
  <main>
    <nav>
      <h2>Anime List</h2>
      <ul id="animeListNav">
        <!-- Anime list items will be inserted by JS -->
      </ul>
    </nav>
    <section id="episodes">
      <h2 id="animeTitleHeader">Select an Anime</h2>
      <div id="animeGenres" class="genres-display" style="display: none;"></div>
      <div class="episode-list" id="episodeListContainer">
        <!-- Episodes inserted by JS -->
      </div>
    </section>
  </main>
  <footer>Â© 2025 Animica Hindi</footer>

  <script>
    const episodeListDiv = document.getElementById("episodeListContainer");
    const episodeSection = document.getElementById("episodes");
    const animeListNavUl = document.getElementById("animeListNav");
    const animeTitleHeader = document.getElementById("animeTitleHeader");
    const animeGenresDiv = document.getElementById("animeGenres");

    let allAnimeData = []; // To store fetched anime data

    function renderEpisodes(anime) {
      // Assuming images are in the same directory or you provide a full path in imageName
      // If images are in an 'images' subfolder, use: `url('images/${anime.imageName}')`
      episodeSection.style.backgroundImage = `url('${anime.imageName}')`;
      animeTitleHeader.textContent = `${anime.title} Episodes`;
      
      if (anime.genres && anime.genres.length > 0) {
        animeGenresDiv.textContent = `Genres: ${anime.genres.join(', ')}`;
        animeGenresDiv.style.display = 'block';
      } else {
        animeGenresDiv.style.display = 'none';
      }

      episodeListDiv.innerHTML = ""; // Clear previous episodes
      if (anime.episodes && anime.episodes.length > 0) {
        anime.episodes.forEach(ep => {
          const epDiv = document.createElement("div");
          epDiv.classList.add("episode");
          epDiv.innerHTML = `<a href="${ep.link}" target="_blank" download>Episode ${ep.ep} Download</a>`;
          episodeListDiv.appendChild(epDiv);
        });
      } else {
        episodeListDiv.innerHTML = "<p>No episodes listed for this series yet.</p>";
      }
    }

    function populateAnimeNav(animeData) {
      animeListNavUl.innerHTML = ""; // Clear existing list items
      animeData.forEach((anime, index) => {
        const listItem = document.createElement("li");
        listItem.textContent = anime.title;
        listItem.dataset.id = anime.id;
        
        listItem.addEventListener("click", () => {
          // Remove active class from all other items
          document.querySelectorAll("#animeListNav li").forEach(li => li.classList.remove("active"));
          // Add active class to the clicked item
          listItem.classList.add("active");

          const selectedAnime = allAnimeData.find(a => a.id === anime.id);
          if (selectedAnime) {
            renderEpisodes(selectedAnime);
          }
        });

        animeListNavUl.appendChild(listItem);

        // Make the first anime active by default
        if (index === 0) {
          listItem.classList.add("active");
        }
      });
    }

    async function fetchAnimeData() {
      try {
        const response = await fetch('anime-data.json'); // Fetches the JSON file
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        allAnimeData = await response.json();
        
        if (allAnimeData.length > 0) {
          populateAnimeNav(allAnimeData);
          renderEpisodes(allAnimeData[0]); // Render the first anime by default
        } else {
          animeTitleHeader.textContent = "No Anime Data Found";
          episodeListDiv.innerHTML = "<p>Could not load anime list.</p>";
        }
      } catch (error) {
        console.error("Could not fetch anime data:", error);
        animeTitleHeader.textContent = "Error Loading Anime";
        episodeListDiv.innerHTML = `<p>Failed to load anime list. Please check console for errors. (${error.message})</p>`;
      }
    }

    // Initial load
    fetchAnimeData();
  </script>
</body>
</html>